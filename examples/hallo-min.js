// Generated by CoffeeScript 1.3.3
(function(){(function(e){return e.widget("Hallo.halloToolbarContextual",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null},_create:function(){var t=this;return this.toolbar=this.options.toolbar,e(this.options.parentElement).append(this.toolbar),this._bindEvents(),e(window).resize(function(e){return t._updatePosition(t._getPosition(e))})},_getPosition:function(e,t){var n,r;if(!e)return;n=e.type;if(n==="keydown"||n==="keyup"||n==="keypress")return this._getCaretPosition(t);if(n==="click"||n==="mousedown"||n==="mouseup")return r={top:e.pageY,left:e.pageX}},_getCaretPosition:function(t){var n,r,i;return i=e("<span/>"),n=rangy.createRange(),n.setStart(t.endContainer,t.endOffset),n.insertNode(i.get(0)),r={top:i.offset().top,left:i.offset().left},i.remove(),r},setPosition:function(){return this.options.parentElement!=="body"&&(this.options.parentElement="body",e(this.options.parentElement).append(this.toolbar)),this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-20),this.toolbar.css("left",this.element.offset().left)},_updatePosition:function(e){if(!e)return;if(!e.top||!e.left)return;return this.toolbar.css("top",e.top),this.toolbar.css("left",e.left)},_bindEvents:function(){var e=this;return this.element.bind("halloselected",function(t,n){var r;r=e._getPosition(n.originalEvent,n.selection);if(!r)return;return e._updatePosition(r),e.toolbar.show()}),this.element.bind("hallounselected",function(t,n){return e.toolbar.hide()}),this.element.bind("hallodeactivated",function(t,n){return e.toolbar.hide()})}})})(jQuery),function(e){return e.widget("Hallo.halloToolbarFixed",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null},_create:function(){var t,n,r=this;this.toolbar=this.options.toolbar,this.toolbar.show(),e(this.options.parentElement).append(this.toolbar),this._bindEvents(),e(window).resize(function(e){return r._updatePosition(r._getPosition(e))});if(this.options.parentElement==="body"&&!this.options.floating)return t=e(this.element),n=parseFloat(t.css("padding-left")),n+=parseFloat(t.css("padding-right")),n+=parseFloat(t.css("border-left-width")),n+=parseFloat(t.css("border-right-width")),n+=parseFloat(t.css("outline-width"))*2,n+=parseFloat(t.css("outline-offset"))*2,e(this.toolbar).css("width",t.width()+n)},_getPosition:function(e,t){var n,r;if(!e)return;return n=parseFloat(this.element.css("outline-width"))+parseFloat(this.element.css("outline-offset")),r={top:this.element.offset().top-this.toolbar.outerHeight()-n,left:this.element.offset().left-n}},_getCaretPosition:function(t){var n,r,i;return i=e("<span/>"),n=rangy.createRange(),n.setStart(t.endContainer,t.endOffset),n.insertNode(i.get(0)),r={top:i.offset().top,left:i.offset().left},i.remove(),r},setPosition:function(){if(this.options.parentElement!=="body")return;return this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-this.toolbar.outerHeight()),this.toolbar.css("left",this.element.offset().left)},_updatePosition:function(e){},_bindEvents:function(){var e=this;return this.element.bind("halloactivated",function(t,n){return e._updatePosition(e._getPosition(t)),e.toolbar.show()(e.toolbar?void 0:e._create)}),this.element.bind("hallodeactivated",function(t,n){return e.toolbar.remove()})}})}(jQuery),function(e){return e.widget("Hallo.halloToolbarAbsolute",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null},_create:function(){var t,n,r=this;this.toolbar=this.options.toolbar,this.toolbar.show(),e(this.options.parentElement).append(this.toolbar),this._bindEvents(),e(window).resize(function(e){return r._updatePosition(r._getPosition(e))});if(this.options.parentElement==="body"&&!this.options.floating)return t=e(this.element),n=parseFloat(t.css("padding-left")),n+=parseFloat(t.css("padding-right")),n+=parseFloat(t.css("border-left-width")),n+=parseFloat(t.css("border-right-width")),n+=parseFloat(t.css("outline-width"))*2,n+=parseFloat(t.css("outline-offset"))*2,e(this.toolbar).css("width",t.width()+n)},_getPosition:function(e,t){var n,r;if(!e)return;return n=parseFloat(this.element.css("outline-width"))+parseFloat(this.element.css("outline-offset")),r={top:this.element.offset().top-this.toolbar.outerHeight()-n,left:this.element.offset().left-n}},_getCaretPosition:function(t){var n,r,i;return i=e("<span/>"),n=rangy.createRange(),n.setStart(t.endContainer,t.endOffset),n.insertNode(i.get(0)),r={top:i.offset().top,left:i.offset().left},i.remove(),r},setPosition:function(){if(this.options.parentElement!=="body")return;return this.toolbar.css("position","fixed"),this.toolbar.css("top","4px"),this.toolbar.css("left","4px")},_updatePosition:function(e){},_bindEvents:function(){var e=this;return this.element.bind("hallodeactivated",function(t,n){return e.toolbar.remove(),e.destroy()})}})}(jQuery),function(e){return e.widget("IKS.hallo",{toolbar:null,bound:!1,originalContent:"",previousContent:"",uuid:"",selection:null,_keepActivated:!1,originalHref:null,options:{editable:!0,plugins:{},toolbar:"halloToolbarContextual",parentElement:"body",buttonCssClass:null,placeholder:"",forceStructured:!0,checkTouch:!0,touchScreen:null},_create:function(){var t,n,r,i=this;this.id=this._generateUUID(),this.options.checkTouch&&this.options.touchScreen===null&&this.checkTouch(),r=this.options.plugins;for(n in r)t=r[n],e.isPlainObject(t)||(t={}),e.extend(t,{editable:this,uuid:this.id,buttonCssClass:this.options.buttonCssClass}),e(this.element)[n](t);return this.element.bind("halloactivated",function(){return i._prepareToolbar()}),this.element.bind("hallodeactivated",function(){return i._removeToolbar()}),this.originalContent=this.getContents()},_init:function(){return this.options.editable?this.enable():this.disable()},disable:function(){var t=this;return this.element.attr("contentEditable",!1),this.element.unbind("focus",this._activated),this.element.unbind("blur",this._deactivated),this.element.unbind("keyup paste change",this._checkModified),this.element.unbind("keyup",this._keys),this.element.unbind("keyup mouseup",this._checkSelection),this.bound=!1,e(this.element).removeClass("isModified"),this.element.parents("a").andSelf().each(function(n,r){var i;i=e(r);if(!i.is("a"))return;if(!t.originalHref)return;return i.attr("href",t.originalHref)}),this._trigger("disabled",null)},enable:function(){var t,n=this;return this.element.parents("a[href]").andSelf().each(function(t,r){var i;i=e(r);if(!i.is("a[href]"))return;return n.originalHref=i.attr("href"),i.removeAttr("href")}),this.element.attr("contentEditable",!0),this.element.html()||this.element.html(this.options.placeholder),this.bound||(this.element.bind("focus",this,this._activated),this.element.bind("blur",this,this._deactivated),this.element.bind("keyup paste change",this,this._checkModified),this.element.bind("keyup",this,this._keys),this.element.bind("keyup mouseup",this,this._checkSelection),t=this,this.bound=!0),this.options.forceStructured&&this._forceStructured(),this._trigger("enabled",null)},activate:function(){return this.element.focus()},containsSelection:function(){var e;return e=this.getSelection(),this.element.has(e.startContainer).length>0},getSelection:function(){var e,t;return t=rangy.getSelection(),e=null,t.rangeCount>0?e=t.getRangeAt(0):e=rangy.createRange(),e},restoreSelection:function(e){var t;return t=rangy.getSelection(),t.setSingleRange(e)},replaceSelection:function(t){var n,r,i,s,o;return e.browser.msie?(o=document.selection.createRange().text,r=document.selection.createRange(),r.pasteHTML(t(o))):(s=window.getSelection(),i=s.getRangeAt(0),n=document.createTextNode(t(i.extractContents())),i.insertNode(n),i.setStartAfter(n),s.removeAllRanges(),s.addRange(i))},replaceSelectionHTML:function(t){var n,r,i,s,o,u,a,f,l;return e.browser.msie?(l=document.selection.createRange().text,n=document.selection.createRange(),n.pasteHTML(t(l))):(f=window.getSelection(),r=f.getRangeAt(0),o=r.commonAncestorContainer,o.nodeType!==1&&(o=o.parentNode),i=r.cloneContents(),u=e(o),s=e("<div></div>"),s[0].appendChild(i),a=t(u,s),a&&document.execCommand("insertHTML",!1,a),f.removeAllRanges(),f.addRange(r))},removeAllSelections:function(){return e.browser.msie?range.empty():window.getSelection().removeAllRanges()},getContents:function(){var t,n;t=this.element.clone();for(n in this.options.plugins){if(!e.isFunction(e(this.element).data(n).cleanupContentClone))continue;e(this.element)[n]("cleanupContentClone",t)}return t.html()},setContents:function(e){return this.element.html(e)},isModified:function(){return this.previousContent||(this.previousContent=this.originalContent),this.previousContent!==this.getContents()},setUnmodified:function(){return this.previousContent=this.getContents()},setModified:function(){return e(this.element).addClass("isModified"),this._trigger("modified",null,{editable:this,content:this.getContents()})},restoreOriginalContent:function(){return this.element.html(this.originalContent)},execute:function(e,t){if(document.execCommand(e,!1,t))return this.element.trigger("change")},protectFocusFrom:function(e){var t;return t=this,e.bind("mousedown",function(e){return e.preventDefault(),t._protectToolbarFocus=!0,setTimeout(function(){return t._protectToolbarFocus=!1},300)})},keepActivated:function(e){this._keepActivated=e},_generateUUID:function(){var e;return e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_prepareToolbar:function(){var t;this.toolbar=e('<div class="hallotoolbar"></div>'),e(this.element)[this.options.toolbar]({editable:this,parentElement:this.options.parentElement,toolbar:this.toolbar}),e(this.element)[this.options.toolbar]&&e(this.element)[this.options.toolbar]("_create");for(t in this.options.plugins)e(this.element)[t]("populateToolbar",this.toolbar);return e(this.element)[this.options.toolbar]("setPosition"),this.protectFocusFrom(this.toolbar)},_removeToolbar:function(){return this.toolbar.remove()},_checkModified:function(e){var t;t=e.data;if(t.isModified())return t.setModified()},_keys:function(e){var t,n;n=e.data;if(e.keyCode===27)return t=n.getContents(),n.restoreOriginalContent(e),n._trigger("restored",null,{editable:n,content:n.getContents(),thrown:t}),n.turnOff()},_rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},_checkSelection:function(e){var t;if(e.keyCode===27)return;return t=e.data,setTimeout(function(){var n;n=t.getSelection();if(t._isEmptySelection(n)||t._isEmptyRange(n)){t.selection&&(t.selection=null,t._trigger("unselected",null,{editable:t,originalEvent:e}));return}if(!t.selection||!t._rangesEqual(n,t.selection))return t.selection=n.cloneRange(),t._trigger("selected",null,{editable:t,selection:t.selection,ranges:[t.selection],originalEvent:e})},0)},_isEmptySelection:function(e){return e.type==="Caret"?!0:!1},_isEmptyRange:function(e){return e.collapsed?!0:e.isCollapsed?typeof e.isCollapsed=="function"?e.isCollapsed():e.isCollapsed:!1},turnOn:function(){return this.getContents()===this.options.placeholder&&this.setContents(""),e(this.element).addClass("inEditMode"),this._trigger("activated",this)},turnOff:function(){e(this.element).removeClass("inEditMode"),this._trigger("deactivated",this);if(!this.getContents())return this.setContents(this.options.placeholder)},_activated:function(e){return e.data.turnOn()},_deactivated:function(t){if(t.data._keepActivated)return;return t.data._protectToolbarFocus!==!0?t.data.turnOff():setTimeout(function(){return e(t.data.element).focus()},300)},_forceStructured:function(e){try{return document.execCommand("styleWithCSS",0,!1)}catch(t){try{return document.execCommand("useCSS",0,!0)}catch(t){try{return document.execCommand("styleWithCSS",!1,!1)}catch(t){}}}},checkTouch:function(){return this.options.touchScreen="createTouch"in document}})}(jQuery),function(e){return e.widget("IKS.hallosourcedescription",{options:{editable:null,toolbar:null,uuid:"",elements:["quote"],buttonCssClass:null,citehandler:null},_create:function(){return this},populateToolbar:function(t){var n,r,i,s,o,u=this;return n=e('<span class="'+this.widgetName+'"></span>'),i=""+this.options.uuid+"-"+this.widgetName+"-data",o=this._prepareDropdown(i),this.options.citehandler=e(this.options.editable.element).citehandler(),this.options.citehandler.citehandler("bindEvents"),r=this.options.citehandler,s=function(){return u.options.citehandler.citehandler("setupSourceDescriptions",o,e.proxy(u._addElement,u))},n.append(o),n.append(this._prepareButton(s,o)),t.append(n)},_prepareDropdown:function(t){var n,r,i,s,o,u;r=e('<div id="'+t+'"></div>'),r.css({"background-color":"white"}),n=this.options.editable.element.get(0).tagName.toLowerCase(),u=this.options.elements;for(s=0,o=u.length;s<o;s++)i=u[s],r.append(this._addElement(i,n));return r},_addElement:function(t,n,r,i){var s,o,u,a=this;return s=e('<div class="menu-item">'+t+"</div>"),r&&s.addClass(r),n===t&&s.addClass("selected"),i&&s.append('<span class="data" style="display:none">'+i+"</span>"),n!=="div"&&s.addClass("disabled"),u=this.options.editable,o=this.options.citehandler,s.bind("click",function(e){var n;return n=function(e,n){var r;return r=!1,t==="quote"?(!e.attr("contenteditable")&&e.hasClass(t)&&(e.removeClass(t),r),r='<span class="'+t+'">'+n.html()+"</span>"):(n.html()!==""?r='<span class="citation">'+n.html()+"</span>":r="",r+='<span class="cite" id="ITEM-'+i+'">'+t+"</span>"),r},u.replaceSelectionHTML(n),o.citehandler("bindEvents")})},_prepareButton:function(t,n){var r;return r=e("<span></span>"),r.hallodropdownbutton({uuid:this.options.uuid,editable:this.options.editable,label:"block",icon:"icon-text-height",target:n,setup:t,cssClass:this.options.buttonCssClass}),r}})}(jQuery),function(e){return e.widget("IKS.citehandler",{options:{uuid:"",label:null,icon:null,editable:null,target:"",setup:null,cssClass:null,settings:null},_create:function(){return this.options.editable=this,debug.log("citehandler created")},_init:function(){return debug.log("citehandler initialized"),this},bindEvents:function(){return this.options.editable.element.find(".cite").attr("contenteditable","false"),this.options.editable.element.find(".cite").unbind(),this.options.editable.element.find(".cite").bind("mouseover",this._showOverlay(this)),debug.log("bound events")},setupSourceDescriptions:function(t,n){var r,i=this;debug.log("setup sourcedescriptions..."),t.find(".SourceDescription").remove(),r=function(r,i){var s,o,u,a,f;s=e(i).find(".citation_index").html();try{return f=e(i).find(".citation_data").html(),f=f.replace(/, \"ITEM-/,'"ITEM-'),o=JSON.parse("{"+f+"}"),a=o["ITEM-"+s].type,u=o["ITEM-"+s].title,t.append(n(u,null,a,s).addClass("SourceDescription"))}catch(l){return debug.log("[dev] citehandler::setupSourceDescription: invalid citation_data: "+l)}};if(this.options.editable.element.parent(".nugget").length)return this.options.editable.element.parent(".nugget").find(".SourceDescription").each(r);if(this.options.editable.element.parent(".Text").length)return this.options.editable.element.parent(".Text").find(".SourceDescription").each(r)},_updateSettings:function(){if(omc_settings)return this.options.settings=JSON.parse(omc_settings.getSettings())},_showOverlay:function(e){return this}})}(jQuery),function(e){return e.widget("IKS.halloblock",{options:{editable:null,toolbar:null,uuid:"",elements:["h1","h2","h3","p","pre","blockquote"],buttonCssClass:null},populateToolbar:function(t){var n,r,i;return n=e('<span class="'+this.widgetName+'"></span>'),r=""+this.options.uuid+"-"+this.widgetName+"-data",i=this._prepareDropdown(r),n.append(i),n.append(this._prepareButton(i)),t.append(n)},_prepareDropdown:function(t){var n,r,i,s,o,u,a,f=this;i=e('<div id="'+t+'"></div>'),r=this.options.editable.element.get(0).tagName.toLowerCase(),n=function(t){var n,i;return n=e("<button class='blockselector'><"+t+' class="menu-item">'+t+"</"+t+"></button>"),r===t&&n.addClass("selected"),r!=="div"&&n.addClass("disabled"),n.bind("click",function(){if(n.hasClass("disabled"))return;return e.browser.msie?f.options.editable.execute("FormatBlock","<"+t.toUpperCase()+">"):f.options.editable.execute("formatBlock",t.toUpperCase())}),i=function(e){var r;r=document.queryCommandValue("formatBlock");if(r.toLowerCase()===t){n.addClass("selected");return}return n.removeClass("selected")},f.options.editable.element.bind("keyup paste change mouseup",i),f.options.editable.element.bind("halloenabled",function(){return f.options.editable.element.bind("keyup paste change mouseup",i)}),f.options.editable.element.bind("hallodisabled",function(){return f.options.editable.element.unbind("keyup paste change mouseup",i)}),n},a=this.options.elements;for(o=0,u=a.length;o<u;o++)s=a[o],i.append(n(s));return i},_prepareButton:function(t){var n;return n=e("<span></span>"),n.hallodropdownbutton({uuid:this.options.uuid,editable:this.options.editable,label:"block",icon:"icon-text-height",target:t,cssClass:this.options.buttonCssClass}),n}})}(jQuery),function(e){return e.widget("IKS.hallolists",{options:{editable:null,toolbar:null,uuid:"",lists:{ordered:!0,unordered:!0},buttonCssClass:null},populateToolbar:function(t){var n,r,i=this;return r=e('<span class="'+this.widgetName+'"></span>'),n=function(t,n){var s;return s=e("<span></span>"),s.hallobutton({uuid:i.options.uuid,editable:i.options.editable,label:n,command:"insert"+t+"List",icon:"icon-list-"+n.toLowerCase(),cssClass:i.options.buttonCssClass}),r.append(s)},this.options.lists.ordered&&n("Ordered","OL"),this.options.lists.unordered&&n("Unordered","UL"),r.hallobuttonset(),t.append(r)}})}(jQuery),function(e){return e.widget("IKS.hallojustify",{options:{editable:null,toolbar:null,uuid:"",buttonCssClass:null},populateToolbar:function(t){var n,r,i=this;return r=e('<span class="'+this.widgetName+'"></span>'),n=function(t){var n;return n=e("<span></span>"),n.hallobutton({uuid:i.options.uuid,editable:i.options.editable,label:t,command:"justify"+t,icon:"icon-align-"+t.toLowerCase(),cssClass:i.options.buttonCssClass}),r.append(n)},n("Left"),n("Center"),n("Right"),r.hallobuttonset(),t.append(r)},_init:function(){}})}(jQuery),function(e){return e.widget("IKS.halloreundo",{options:{editable:null,toolbar:null,uuid:"",buttonCssClass:null},populateToolbar:function(t){var n,r,i=this;return r=e('<span class="'+this.widgetName+'"></span>'),n=function(t,n){var s;return s=e("<span></span>"),s.hallobutton({uuid:i.options.uuid,editable:i.options.editable,label:n,icon:t==="undo"?"icon-undo":"icon-repeat",command:t,queryState:!1,cssClass:i.options.buttonCssClass}),r.append(s)},n("undo","Undo"),n("redo","Redo"),r.hallobuttonset(),t.append(r)},_init:function(){}})}(jQuery),function(e){return e.widget("IKS.halloformat",{options:{editable:null,uuid:"",formattings:{bold:!0,italic:!0,strikeThrough:!1,underline:!1},buttonCssClass:null},populateToolbar:function(t){var n,r,i,s,o,u,a=this;o=this,r=e('<span class="'+o.widgetName+'"></span>'),n=function(t){var n;return n=e("<span></span>"),n.hallobutton({label:t,editable:a.options.editable,command:t,uuid:a.options.uuid,cssClass:a.options.buttonCssClass}),r.append(n)},u=this.options.formattings;for(s in u)i=u[s],i&&n(s);return r.hallobuttonset(),t.append(r)}})}(jQuery),function(e){return e.widget("IKS.hallobutton",{button:null,isChecked:!1,options:{uuid:"",label:null,icon:null,editable:null,command:null,queryState:!0,cssClass:null},_create:function(){var e,t,n=this;return this.options.text=!1,this.options.icons={primary:"ui-icon-"+this.options.command+"-p"},t=""+this.options.uuid+"-"+this.options.label,this.button=this._createButton(t,this.options.command,this.options.label,this.options.icon),this.element.append(this.button),this.button.button({icons:this.options.icons,text:!1}),this.options.cssClass&&this.button.addClass(this.options.cssClass),this.options.editable.options.touchScreen&&this.button.addClass("btn-large"),this.button.data("hallo-command",this.options.command),e="ui-state-hover",this.button.bind("mouseenter",function(t){if(n.isEnabled())return n.button.addClass(e)}),this.button.bind("mouseleave",function(t){return n.button.removeClass(e)})},_init:function(){var e,t,n=this;this.button||(this.button=this._prepareButton()),this.element.append(this.button),t=function(e){if(!n.options.command)return;try{return n.checked(document.queryCommandState(n.options.command))}catch(t){}},this.options.command&&this.button.bind("click",function(e){return n.options.editable.execute(n.options.command),t,!1});if(!this.options.queryState)return;return e=this.options.editable.element,e.bind("keyup paste change mouseup hallomodified",t),e.bind("halloenabled",function(){return e.bind("keyup paste change mouseup hallomodified",t)}),e.bind("hallodisabled",function(){return e.unbind("keyup paste change mouseup hallomodified",t)})},enable:function(){return this.button.removeAttr("disabled")},disable:function(){return this.button.attr("disabled","true")},isEnabled:function(){return this.button.attr("disabled")!=="true"},refresh:function(){return this.isChecked?this.button.addClass("ui-state-active"):this.button.removeClass("ui-state-active")},checked:function(e){return this.isChecked=e,this.refresh()},_createButton:function(t,n,r,i){return e('<button for="'+t+'" class="ui-button ui-widget ui-state-default ui-corner-all '+n+'_button" title="'+r+'" rel="'+n+'">'+r+"</button>")}}),e.widget("IKS.hallobuttonset",{buttons:null,_create:function(){return this.element.addClass("ui-buttonset")},_init:function(){return this.refresh()},refresh:function(){var e;return e=this.element.css("direction")==="rtl",this.buttons=this.element.find(".ui-button"),this.buttons.hallobutton("refresh"),this.buttons.removeClass("ui-corner-all ui-corner-left ui-corner-right"),this.buttons.filter(":first").addClass(e?"ui-corner-right":"ui-corner-left"),this.buttons.filter(":last").addClass(e?"ui-corner-left":"ui-corner-right")}})}(jQuery),function(e){return e.widget("IKS.hallodropdownbutton",{button:null,options:{uuid:"",label:null,icon:null,editable:null,target:"",setup:null,cssClass:null},_create:function(){var e,t;return(t=(e=this.options).icon)!=null?t:e.icon="icon-"+this.options.label.toLowerCase()},_init:function(){var t,n=this;return t=e(this.options.target),t.css("position","absolute"),t.addClass("dropdown-menu"),t.hide(),this.button||(this.button=this._prepareButton()),this.button.bind("click",function(){if(t.hasClass("open")){n._hideTarget();return}return n._showTarget()}),t.bind("click",function(){return n._hideTarget()}),this.options.editable.element.bind("hallodeactivated",function(){return n._hideTarget()}),this.element.append(this.button)},_showTarget:function(){var t;return t=e(this.options.target),this.options.setup&&this.options.setup(),this._updateTargetPosition(),t.addClass("open"),t.show()},_hideTarget:function(){var t;return t=e(this.options.target),t.removeClass("open"),t.hide()},_updateTargetPosition:function(){var t,n,r,i;return n=e(this.options.target),i=this.button.position(),r=i.top,t=i.left,r+=this.button.outerHeight(),n.css("top",r),n.css("left",t-20)},_prepareButton:function(){var t,n,r;return r=""+this.options.uuid+"-"+this.options.label,n=e('<button id="'+r+'" data-toggle="dropdown" data-target="#'+this.options.target.attr("id")+'" title="'+this.options.label+'" rel="'+this.options.label+'">\n</button>'),this.options.cssClass&&n.addClass(this.options.cssClass),t=n.button({icons:{primary:"ui-icon-"+this.options.label+"-p"},text:!1}),t}})}(jQuery)}).call(this);